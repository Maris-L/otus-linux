root@LM192:/etc/ansible# ansible-playbook provision.yml

PLAY [Provision mon server] ******************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************
ok: [mon]

TASK [mon : Update] **************************************************************************************************************
changed: [mon]

TASK [mon : Upgrade] *************************************************************************************************************
ok: [mon]

TASK [mon : Upgrade all packages] ************************************************************************************************
ok: [mon]

TASK [mon : Create temp directory] ***********************************************************************************************
ok: [mon]

TASK [mon : Set dns to resolv.conf] **********************************************************************************************
changed: [mon]

TASK [mon : Add DNS servers] *****************************************************************************************************
changed: [mon]

TASK [mon : Add repo] ************************************************************************************************************
ok: [mon]

TASK [mon : Update] **************************************************************************************************************
changed: [mon]

TASK [mon : Install prom, etc.] **************************************************************************************************
ok: [mon]

TASK [mon : Copy prometheus conf file] *******************************************************************************************
ok: [mon]

TASK [mon : Restart prometheus] **************************************************************************************************
changed: [mon]

TASK [mon : Enable prometheus] ***************************************************************************************************
ok: [mon]

TASK [mon : Add grafana repo key] ************************************************************************************************
ok: [mon]

TASK [mon : Add repo] ************************************************************************************************************
ok: [mon]

TASK [mon : Update] **************************************************************************************************************
changed: [mon]

TASK [mon : Install grafana] *****************************************************************************************************
ok: [mon]

TASK [mon : Enable grafana-server] ***********************************************************************************************
ok: [mon]

TASK [mon : Enable grafana-server] ***********************************************************************************************
ok: [mon]

TASK [mon : Copy unit file] ******************************************************************************************************
ok: [mon]

TASK [mon : Download blackbox exporter] ******************************************************************************************
ok: [mon]

TASK [mon : Unarchive blackbox-exporter] *****************************************************************************************
ok: [mon]

TASK [mon : Reload daemon] *******************************************************************************************************
ok: [mon]

TASK [mon : Enable blackbox-exporter] ********************************************************************************************
ok: [mon]

TASK [mon : Restart blackbox-exporter] *******************************************************************************************
changed: [mon]

PLAY [Provision web server] ******************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************
ok: [web]

TASK [web : Update] **************************************************************************************************************
changed: [web]

TASK [web : Upgrade] *************************************************************************************************************
ok: [web]

TASK [web : Upgrade all packages] ************************************************************************************************
ok: [web]

TASK [web : Create temp directory] ***********************************************************************************************
ok: [web]

TASK [web : Set dns to resolv.conf] **********************************************************************************************
changed: [web]

TASK [web : Add DNS servers] *****************************************************************************************************
changed: [web]

TASK [web : Add repo] ************************************************************************************************************
ok: [web]

TASK [web : Update] **************************************************************************************************************
changed: [web]

TASK [web : Install prom, etc.] **************************************************************************************************
ok: [web]

TASK [web : Install php] *********************************************************************************************************
ok: [web]

TASK [web : Enable php-fpm] ******************************************************************************************************
ok: [web]

TASK [web : Stop apache] *********************************************************************************************************
ok: [web]

TASK [web : Delete apache2] ******************************************************************************************************
ok: [web]

TASK [web : Install nginx] *******************************************************************************************************
ok: [web]

TASK [web : nginx] ***************************************************************************************************************
ok: [web]

TASK [web : Create temp directory] ***********************************************************************************************
ok: [web]

TASK [web : Download wordpress] **************************************************************************************************
 [WARNING]: Consider using the get_url or uri module rather than running wget.  If you need to use command because get_url or uri
is insufficient you can add warn=False to this command task or set command_warnings=False in ansible.cfg to get rid of this
message.

changed: [web]

TASK [web : Untar wp] ************************************************************************************************************
changed: [web]

TASK [web : Change html dir permissions] *****************************************************************************************
changed: [web]

TASK [web : Delete default config] ***********************************************************************************************
changed: [web]

TASK [web : Delete default config] ***********************************************************************************************
changed: [web]

TASK [web : Copy wp conf] ********************************************************************************************************
changed: [web]

TASK [web : Create symlink] ******************************************************************************************************
changed: [web]

TASK [web : Add official MySQL package authentication key] ***********************************************************************
changed: [web]

TASK [web : Add MySQL repository] ************************************************************************************************
changed: [web]

TASK [web : Set MySQL root password] *********************************************************************************************
changed: [web]

TASK [web : Confirm MySQL root password] *****************************************************************************************
changed: [web]

TASK [web : Enable Legacy Authentication Method] *********************************************************************************
changed: [web]

TASK [web : Install/Update MySQL 8.0 Community Server] ***************************************************************************
changed: [web]

TASK [web : Allow remote connect to the server] **********************************************************************************
changed: [web]

TASK [web : Create root and allow remote connection] *****************************************************************************
changed: [web]

TASK [web : Create wp database] **************************************************************************************************
changed: [web]

TASK [web : Create wp user and allow remote connect] *****************************************************************************
changed: [web]

TASK [web : Create mysql exporter user] ******************************************************************************************
changed: [web]

TASK [web : Copy connection config] **********************************************************************************************
changed: [web]

TASK [web : Copy unit file] ******************************************************************************************************
changed: [web]

TASK [web : Download mysql-exporter] *********************************************************************************************
changed: [web]

TASK [web : Unarchive mysql-exporter] ********************************************************************************************
changed: [web]

TASK [web : Reload daemon] *******************************************************************************************************
ok: [web]

TASK [web : Enable mysql-exporter] ***********************************************************************************************
changed: [web]

TASK [web : Restart mysql-exporter] **********************************************************************************************
changed: [web]

TASK [web : Copy unit file] ******************************************************************************************************
changed: [web]

TASK [web : Download nginx exporter] *********************************************************************************************
changed: [web]

TASK [web : Unarchive nginx-exporter] ********************************************************************************************
changed: [web]

TASK [web : Reload daemon] *******************************************************************************************************
ok: [web]

TASK [web : Enable nginx-exporter] ***********************************************************************************************
changed: [web]

TASK [web : Restart nginx-exporter] **********************************************************************************************
changed: [web]

RUNNING HANDLER [web : Restart nginx] ********************************************************************************************
changed: [web]

RUNNING HANDLER [web : Restart mysql-server] *************************************************************************************
changed: [web]

PLAY RECAP ***********************************************************************************************************************
mon                        : ok=25   changed=7    unreachable=0    failed=0
web                        : ok=50   changed=35   unreachable=0    failed=0

